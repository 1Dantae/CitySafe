<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - SafeCity</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="dashboard">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>SafeCity</h2>
                <p class="user-role">Admin</p>
            </div>
            
            <nav class="sidebar-nav">
                <a href="#overview" class="nav-item active" onclick="showSection('overview')">
                    <span class="icon">üìä</span>
                    <span>Overview</span>
                </a>
                <a href="#reports" class="nav-item" onclick="showSection('reports')">
                    <span class="icon">üìã</span>
                    <span>Reports</span>
                </a>
                <a href="#chatrooms" class="nav-item" onclick="showSection('chatrooms')">
                    <span class="icon">üí¨</span>
                    <span>Chat Monitoring</span>
                    <span class="badge">3</span>
                </a>
                <a href="#users" class="nav-item" onclick="showSection('users')">
                    <span class="icon">üë•</span>
                    <span>Users</span>
                </a>
                <a href="#alerts" class="nav-item" onclick="showSection('alerts')">
                    <span class="icon">üö®</span>
                    <span>Emergency Alerts</span>
                    <span class="badge urgent">2</span>
                </a>
                <a href="#settings" class="nav-item" onclick="showSection('settings')">
                    <span class="icon">‚öôÔ∏è</span>
                    <span>Settings</span>
                </a>
            </nav>
            
            <div class="sidebar-footer">
                <button onclick="logout()" class="btn-logout">
                    <span>Logout</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="dashboard-header">
                <div class="header-left">
                    <h1 id="pageTitle">Dashboard Overview</h1>
                    <p class="breadcrumb">Home / Dashboard</p>
                </div>
                <div class="header-right">
                    <div class="search-box">
                        <input type="text" placeholder="Search...">
                        <span class="icon">üîç</span>
                    </div>
                    <button class="notification-btn">
                        üîî
                        <span class="notification-badge">5</span>
                    </button>
                    <div class="user-profile">
                        <img src="images/istockphoto-1618298821-612x612.jpg" alt="Admin">
                        <span id="userName">Admin</span>
                    </div>
                </div>
            </header>

            <!-- Overview Section -->
            <section id="overview" class="content-section active">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon blue">üìã</div>
                        <div class="stat-info">
                            <h3>Total Reports</h3>
                            <p class="stat-number">147</p>
                            <span class="stat-change positive">+12% from last month</span>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon red">üìû</div>
                        <div class="stat-info">
                            <h3>Emergency Calls</h3>
                            <p class="stat-number">23</p>
                            <span class="stat-change negative">-5% from last month</span>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon green">üë•</div>
                        <div class="stat-info">
                            <h3>Active Users</h3>
                            <p class="stat-number">1,234</p>
                            <span class="stat-change positive">+18% from last month</span>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon orange">‚è±Ô∏è</div>
                        <div class="stat-info">
                            <h3>Pending</h3>
                            <p class="stat-number">12</p>
                            <span class="stat-change neutral">No change</span>
                        </div>
                    </div>
                </div>

                <div class="charts-grid">
                    <div class="chart-card">
                        <h3>Reports Overview</h3>
                        <div class="chart-placeholder">
                            <p>Chart: Reports by Type</p>
                        </div>
                    </div>

                    <div class="chart-card">
                        <h3>Activity Timeline</h3>
                        <div class="chart-placeholder">
                            <p>Chart: Weekly Activity</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Reports Section -->
            <section id="reports" class="content-section">
                <div class="section-header">
                    <h2>Crime Reports</h2>
                    <button class="btn btn-primary">Export Reports</button>
                </div>

                <div class="reports-table">
                    <table>
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Type</th>
                                <th>Location</th>
                                <th>Date</th>
                                <th>Status</th>
                                <th>Reporter</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="reportsTableBody">
                            <tr>
                                <td>#001</td>
                                <td><span class="tag red">Theft</span></td>
                                <td>Kingston, JM</td>
                                <td>2025-10-10</td>
                                <td><span class="status-badge new">New</span></td>
                                <td>Anonymous</td>
                                <td>
                                    <button class="btn-action">View</button>
                                    <button class="btn-action">Resolve</button>
                                </td>
                            </tr>
                            <tr>
                                <td>#002</td>
                                <td><span class="tag orange">Vandalism</span></td>
                                <td>Kingston, JM</td>
                                <td>2025-10-11</td>
                                <td><span class="status-badge pending">Pending</span></td>
                                <td>John Doe</td>
                                <td>
                                    <button class="btn-action">View</button>
                                    <button class="btn-action">Resolve</button>
                                </td>
                            </tr>
                            <tr>
                                <td>#003</td>
                                <td><span class="tag red">Assault</span></td>
                                <td>Kingston, JM</td>
                                <td>2025-10-12</td>
                                <td><span class="status-badge resolved">Resolved</span></td>
                                <td>Jane Smith</td>
                                <td>
                                    <button class="btn-action">View</button>
                                    <button class="btn-action">Archive</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Chat Monitoring Section -->
            <section id="chatrooms" class="content-section">
                <div class="section-header">
                    <h2>Chat Monitoring - AI Assistant</h2>
                    <div class="chat-filters">
                        <button class="filter-btn active">All Chats</button>
                        <button class="filter-btn">Active</button>
                        <button class="filter-btn">Flagged</button>
                        <button class="filter-btn">Escalated</button>
                    </div>
                </div>

                <div class="chat-monitoring-grid">
                    <!-- Chat List -->
                    <div class="chat-list">
                        <div class="chat-item active" onclick="selectChat(1, this)">
                            <div class="chat-avatar">üë§</div>
                            <div class="chat-info">
                                <div class="chat-header">
                                    <h4>User #1234</h4>
                                    <span class="chat-time">2m ago</span>
                                </div>
                                <p class="chat-preview">AI: How can I assist you today?</p>
                                <div class="chat-tags">
                                    <span class="tag green">Active</span>
                                    <span class="tag blue">AI Handling</span>
                                </div>
                            </div>
                        </div>
                    
                        <div class="chat-item urgent" onclick="selectChat(2, this)">
                            <div class="chat-avatar">üö®</div>
                            <div class="chat-info">
                                <div class="chat-header">
                                    <h4>User #5678</h4>
                                    <span class="chat-time">5m ago</span>
                                </div>
                                <p class="chat-preview">User: This is an emergency!</p>
                                <div class="chat-tags">
                                    <span class="tag red">URGENT</span>
                                    <span class="tag orange">Escalated</span>
                                </div>
                            </div>
                        </div>
                    
                        <div class="chat-item" onclick="selectChat(3, this)">
                            <div class="chat-avatar">üë§</div>
                            <div class="chat-info">
                                <div class="chat-header">
                                    <h4>User #9012</h4>
                                    <span class="chat-time">15m ago</span>
                                </div>
                                <p class="chat-preview">AI: Thank you for reporting...</p>
                                <div class="chat-tags">
                                    <span class="tag gray">Resolved</span>
                                </div>
                            </div>
                        </div>
                    </div>
                
                   

                    <!-- Chat Window -->
                    <div class="chat-window">
                        <div class="chat-window-header">
                            <div class="chat-user-info">
                                <h3>User #1234</h3>
                                <p>Active now - AI Assistant responding</p>
                            </div>
                            <div class="chat-actions">
                                <button class="btn-action" onclick="takeOverChat()">Take Over</button>
                                <button class="btn-action danger" onclick="escalateChat()">Escalate</button>
                            </div>
                        </div>

                        <div class="chat-messages" id="chatMessages">
                            <div class="message user">
                                <div class="message-content">
                                    <p>Hello, I need to report suspicious activity</p>
                                    <span class="message-time">10:30 AM</span>
                                </div>
                            </div>

                            <div class="message ai">
                                <div class="ai-badge">ü§ñ</div>
                                <div class="message-content">
                                    <p>Hello! I'm here to help. Can you please provide more details about the suspicious activity you'd like to report?</p>
                                    <span class="message-time">10:31 AM</span>
                                </div>
                            </div>

                            <div class="message user">
                                <div class="message-content">
                                    <p>There's someone hanging around the neighborhood acting strange</p>
                                    <span class="message-time">10:32 AM</span>
                                </div>
                            </div>

                            <div class="message ai">
                                <div class="ai-badge">ü§ñ</div>
                                <div class="message-content">
                                    <p>Thank you for the information. Can you provide the location and any other details that might help?</p>
                                    <span class="message-time">10:32 AM</span>
                                </div>
                            </div>
                        </div>

                        <div class="chat-input-area">
                            <input type="text" placeholder="Type a message..." id="adminMessage">
                            <button class="btn btn-primary" onclick="sendMessage()">Send</button>
                        </div>

                        <div class="ai-status">
                            <span class="status-indicator green"></span>
                            AI Assistant is monitoring this conversation (24/7)
                        </div>
                    </div>

                    <!-- Chat Details -->
                    <div class="chat-details">
                        <h3>Chat Details</h3>
                        
                        <div class="detail-section">
                            <h4>User Information</h4>
                            <p><strong>User ID:</strong> #1234</p>
                            <p><strong>Status:</strong> <span class="tag green">Verified</span></p>
                            <p><strong>Join Date:</strong> Jan 15, 2025</p>
                        </div>

                        <div class="detail-section">
                            <h4>AI Analysis</h4>
                            <p><strong>Sentiment:</strong> Concerned</p>
                            <p><strong>Urgency Level:</strong> Medium</p>
                            <p><strong>Keywords:</strong> suspicious, neighborhood</p>
                        </div>

                        <div class="detail-section">
                            <h4>Escalation Actions</h4>
                            <button class="btn btn-full btn-warning">Notify JDF</button>
                            <button class="btn btn-full btn-warning">Notify JCDF</button>
                            <button class="btn btn-full btn-danger">National Security</button>
                            <button class="btn btn-full">Take Over Chat</button>
                        </div>

                        <div class="detail-section">
                            <h4>Chat History</h4>
                            <p class="small-text">Previous chats: 3</p>
                            <p class="small-text">Total reports: 1</p>
                            <p class="small-text">Last active: 2m ago</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Users Section -->
            <section id="users" class="content-section">
                <div class="section-header">
                    <h2>User Management</h2>
                    <button class="btn btn-primary" onclick="openAddUserModal()">Add User</button>
                </div>
                <div class="users-grid">
                    <div class="user-card">
                        <div class="user-avatar">üë§</div>
                        <h4>John Doe</h4>
                        <p>john@example.com</p>
                        <span class="tag green">Active</span>
                        <p class="small-text">Reports: 5 | Joined: Jan 2025</p>
                    </div>
                    <div class="user-card">
                        <div class="user-avatar">üë§</div>
                        <h4>Jane Smith</h4>
                        <p>jane@example.com</p>
                        <span class="tag green">Active</span>
                        <p class="small-text">Reports: 3 | Joined: Feb 2025</p>
                    </div>
                    <div class="user-card">
                        <div class="user-avatar">üë§</div>
                        <h4>Anonymous User</h4>
                        <p>Guest User</p>
                        <span class="tag gray">Guest</span>
                        <p class="small-text">Reports: 1 | Joined: Today</p>
                    </div>
                </div>
            </section>

            <!-- Emergency Alerts Section -->
            <section id="alerts" class="content-section">
                <div class="section-header">
                    <h2>Emergency Alerts</h2>
                    <button class="btn btn-danger" onclick="openCreateAlertModal()">Create Alert</button>
                </div>

                <div class="alerts-list">
                    <div class="alert-card urgent">
                        <div class="alert-header">
                            <h3>üö® Emergency Call - User #5678</h3>
                            <span class="alert-time">2 minutes ago</span>
                        </div>
                        <p><strong>Location:</strong> Kingston Central</p>
                        <p><strong>Type:</strong> Assault in Progress</p>
                        <p><strong>Status:</strong> Dispatched to JDF</p>
                        <div class="alert-actions">
                            <button class="btn btn-danger" onclick="viewAlertDetails('alert-5678')">View Details</button>
                            <button class="btn btn-secondary" onclick="contactUser('alert-5678')">Contact User</button>
                        </div>
                    </div>

                    <div class="alert-card urgent">
                        <div class="alert-header">
                            <h3>üö® AI Escalation - Chat #9012</h3>
                            <span class="alert-time">10 minutes ago</span>
                        </div>
                        <p><strong>Reason:</strong> Threatening Language Detected</p>
                        <p><strong>AI Confidence:</strong> High (95%)</p>
                        <p><strong>Status:</strong> Awaiting Review</p>
                        <div class="alert-actions">
                            <button class="btn btn-primary" onclick="reviewChat('chat-9012')">Review Chat</button>
                            <button class="btn btn-danger" onclick="openEscalateModal('chat-9012')">Escalate</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Settings Section -->
            <section id="settings" class="content-section">
                <h2>Settings</h2>
                
                <div class="settings-grid">
                    <div class="settings-card">
                        <h3>AI Configuration</h3>
                        <div class="form-group">
                            <label>Auto-Escalation Threshold</label>
                            <select>
                                <option>High Priority Keywords Only</option>
                                <option selected>Medium Priority and Above</option>
                                <option>All Flagged Conversations</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" checked>
                                Enable 24/7 AI Monitoring
                            </label>
                        </div>
                        <button class="btn btn-primary">Save Changes</button>
                    </div>

                    <div class="settings-card">
                        <h3>Notification Settings</h3>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" checked>
                                Email notifications
                            </label>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" checked>
                                SMS alerts for emergencies
                            </label>
                        </div>
                        <button class="btn btn-primary">Save Changes</button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Add User Modal -->
    <div id="addUserModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add New User</h3>
                <button class="close-btn" onclick="closeAddUserModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="info-text">
                    Create login credentials for system administrators or law enforcement personnel.
                </div>

                <form id="addUserForm" onsubmit="handleAddUser(event)">
                    <!-- Role Selection -->
                    <div class="role-select">
                        <label>Select User Role *</label>
                        <div class="role-options">
                            <div class="role-option">
                                <input type="radio" id="roleAdmin" name="role" value="admin" checked>
                                <label for="roleAdmin" class="role-label">System Admin</label>
                            </div>
                            <div class="role-option">
                                <input type="radio" id="roleLawEnforcement" name="role" value="law_enforcement">
                                <label for="roleLawEnforcement" class="role-label">Law Enforcement</label>
                            </div>
                        </div>
                    </div>

                    <!-- Personal Information -->
                    <div class="form-row">
                        <div class="form-group">
                            <label for="firstName">First Name *</label>
                            <input type="text" id="firstName" required placeholder="Enter first name">
                        </div>
                        <div class="form-group">
                            <label for="lastName">Last Name *</label>
                            <input type="text" id="lastName" required placeholder="Enter last name">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="email">Email Address *</label>
                        <input type="email" id="email" required placeholder="user@example.com">
                    </div>

                    <div class="form-group">
                        <label for="badgeId">Badge ID / Employee ID</label>
                        <input type="text" id="badgeId" placeholder="Optional for law enforcement">
                    </div>

                    <div class="form-group">
                        <label for="department">Department</label>
                        <select id="department">
                            <option value="">Select Department</option>
                            <option value="administration">Administration</option>
                            <option value="patrol">Patrol Division</option>
                            <option value="investigations">Investigations</option>
                            <option value="cybercrime">Cybercrime Unit</option>
                            <option value="community">Community Relations</option>
                        </select>
                    </div>

                    <!-- Login Credentials -->
                    <div class="form-group">
                        <label for="username">Username *</label>
                        <input type="text" id="username" required placeholder="Create username">
                    </div>

                    <div class="form-group">
                        <label for="password">Password *</label>
                        <input type="password" id="password" required placeholder="Create secure password" oninput="checkPasswordStrength()">
                        <div class="password-strength">
                            <div id="passwordStrengthBar" class="password-strength-bar"></div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="confirmPassword">Confirm Password *</label>
                        <input type="password" id="confirmPassword" required placeholder="Re-enter password">
                    </div>

                    <div class="form-group">
                        <label for="accessLevel">Access Level *</label>
                        <select id="accessLevel" required>
                            <option value="">Select Access Level</option>
                            <option value="full">Full Access</option>
                            <option value="standard">Standard Access</option>
                            <option value="limited">Limited Access</option>
                            <option value="view_only">View Only</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeAddUserModal()">Cancel</button>
                <button class="btn btn-success" onclick="document.getElementById('addUserForm').requestSubmit()">Create User</button>
            </div>
        </div>
    </div>

    <!-- Report Details Modal -->
    <div id="reportDetailsModal" class="modal" aria-hidden="true">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Report Details</h3>
                <button class="close-btn" onclick="closeReportDetailsModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="details-grid">
                    <div><strong>ID:</strong> <span id="reportId">-</span></div>
                    <div><strong>Type:</strong> <span id="reportType">-</span></div>
                    <div><strong>Location:</strong> <span id="reportLocation">-</span></div>
                    <div><strong>Date:</strong> <span id="reportDate">-</span></div>
                    <div><strong>Status:</strong> <span id="reportStatus">-</span></div>
                    <div><strong>Reporter:</strong> <span id="reportReporter">-</span></div>
                </div>

                <hr>

                

    <!-- Create Alert Modal -->
    <div id="createAlertModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üö® Create Emergency Alert</h3>
                <button class="close-btn" onclick="closeCreateAlertModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="info-text">
                    Broadcast an emergency alert to law enforcement agencies and relevant authorities.
                </div>

                <form id="createAlertForm" onsubmit="handleCreateAlert(event)">
                    <!-- Alert Type Selection -->
                    <div class="alert-type-select">
                        <label>Alert Priority Level *</label>
                        <div class="priority-options">
                            <div class="priority-option">
                                <input type="radio" id="priorityCritical" name="priority" value="critical" checked>
                                <label for="priorityCritical" class="priority-label critical">
                                    <span class="priority-icon">üö®</span>
                                    Critical
                                </label>
                            </div>
                            <div class="priority-option">
                                <input type="radio" id="priorityHigh" name="priority" value="high">
                                <label for="priorityHigh" class="priority-label high">
                                    <span class="priority-icon">‚ö†Ô∏è</span>
                                    High
                                </label>
                            </div>
                            <div class="priority-option">
                                <input type="radio" id="priorityMedium" name="priority" value="medium">
                                <label for="priorityMedium" class="priority-label medium">
                                    <span class="priority-icon">‚ö°</span>
                                    Medium
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Alert Details -->
                    <div class="form-group">
                        <label for="alertTitle">Alert Title *</label>
                        <input type="text" id="alertTitle" required placeholder="e.g., Armed Robbery in Progress">
                    </div>

                    <div class="form-group">
                        <label for="alertType">Incident Type *</label>
                        <select id="alertType" required>
                            <option value="">Select Incident Type</option>
                            <option value="assault">Assault</option>
                            <option value="robbery">Robbery</option>
                            <option value="burglary">Burglary</option>
                            <option value="shooting">Shooting</option>
                            <option value="kidnapping">Kidnapping</option>
                            <option value="domestic_violence">Domestic Violence</option>
                            <option value="suspicious_activity">Suspicious Activity</option>
                            <option value="public_disturbance">Public Disturbance</option>
                            <option value="missing_person">Missing Person</option>
                            <option value="other">Other Emergency</option>
                        </select>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="alertLocation">Location *</label>
                            <input type="text" id="alertLocation" required placeholder="Address or area">
                        </div>
                        <div class="form-group">
                            <label for="alertParish">Parish *</label>
                            <select id="alertParish" required>
                                <option value="">Select Parish</option>
                                <option value="kingston">Kingston</option>
                                <option value="st_andrew">St. Andrew</option>
                                <option value="st_thomas">St. Thomas</option>
                                <option value="portland">Portland</option>
                                <option value="st_mary">St. Mary</option>
                                <option value="st_ann">St. Ann</option>
                                <option value="trelawny">Trelawny</option>
                                <option value="st_james">St. James</option>
                                <option value="hanover">Hanover</option>
                                <option value="westmoreland">Westmoreland</option>
                                <option value="st_elizabeth">St. Elizabeth</option>
                                <option value="manchester">Manchester</option>
                                <option value="clarendon">Clarendon</option>
                                <option value="st_catherine">St. Catherine</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="alertDescription">Description *</label>
                        <textarea id="alertDescription" required placeholder="Provide detailed information about the emergency..." rows="4"></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="suspectDescription">Suspect Description</label>
                            <input type="text" id="suspectDescription" placeholder="Physical description, clothing, etc.">
                        </div>
                        <div class="form-group">
                            <label for="vehicleInfo">Vehicle Information</label>
                            <input type="text" id="vehicleInfo" placeholder="Make, model, license plate">
                        </div>
                    </div>

                    <!-- Notify Agencies -->
                    <div class="notify-agencies">
                        <label>Notify Agencies *</label>
                        <div class="agency-checkboxes">
                            <label class="agency-checkbox">
                                <input type="checkbox" name="agencies" value="JCF" checked>
                                <span class="agency-name">Jamaica Constabulary Force (JCF)</span>
                            </label>
                            <label class="agency-checkbox">
                                <input type="checkbox" name="agencies" value="JDF">
                                <span class="agency-name">Jamaica Defence Force (JDF)</span>
                            </label>
                            <label class="agency-checkbox">
                                <input type="checkbox" name="agencies" value="JCDF">
                                <span class="agency-name">Jamaica Combined Defence Force (JCDF)</span>
                            </label>
                            <label class="agency-checkbox">
                                <input type="checkbox" name="agencies" value="NSA">
                                <span class="agency-name">National Security Agency</span>
                            </label>
                            <label class="agency-checkbox">
                                <input type="checkbox" name="agencies" value="FIRESERVICE">
                                <span class="agency-name">Fire Services</span>
                            </label>
                            <label class="agency-checkbox">
                                <input type="checkbox" name="agencies" value="EMS">
                                <span class="agency-name">Emergency Medical Services</span>
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="sendSMS">
                            Send SMS alerts to nearby officers
                        </label>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="publicAlert">
                            Make this a public safety alert
                        </label>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeCreateAlertModal()">Cancel</button>
                <button class="btn btn-danger" onclick="document.getElementById('createAlertForm').requestSubmit()">
                    üö® Broadcast Alert
                </button>
            </div>
        </div>
    </div>

    <!-- View Alert Details Modal -->
    <div id="viewDetailsModal" class="modal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h3>üö® Alert Details</h3>
                <button class="close-btn" onclick="closeViewDetailsModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="alertDetailsContent">
                    <!-- Content will be dynamically inserted here -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeViewDetailsModal()">Close</button>
                <button class="btn btn-danger">Update Status</button>
            </div>
        </div>
    </div>

    <!-- Contact User Modal -->
    <div id="contactUserModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üìû Contact User</h3>
                <button class="close-btn" onclick="closeContactUserModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="info-text">
                    Choose how you'd like to contact this user regarding their emergency alert.
                </div>

                <div class="contact-method-grid">
                    <div class="contact-method-card" onclick="initiateCall()">
                        <div class="contact-icon">üìû</div>
                        <h4>Voice Call</h4>
                        <p>Call user directly</p>
                        <button class="btn btn-full btn-primary">Initiate Call</button>
                    </div>

                    <div class="contact-method-card" onclick="sendSMS()">
                        <div class="contact-icon">üí¨</div>
                        <h4>SMS Message</h4>
                        <p>Send text message</p>
                        <button class="btn btn-full btn-primary">Send SMS</button>
                    </div>

                    <div class="contact-method-card" onclick="openChat()">
                        <div class="contact-icon">üí≠</div>
                        <h4>Live Chat</h4>
                        <p>Start chat session</p>
                        <button class="btn btn-full btn-primary">Open Chat</button>
                    </div>
                </div>

                <div class="user-contact-info">
                    <h4>User Information</h4>
                    <div id="userContactDetails">
                        <!-- Content will be dynamically inserted -->
                    </div>
                </div>

                <div class="form-group">
                    <label for="contactMessage">Quick Message (Optional)</label>
                    <textarea id="contactMessage" placeholder="Type a message to send to the user..." rows="3"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeContactUserModal()">Cancel</button>
                <button class="btn btn-primary" onclick="sendQuickMessage()">Send Message</button>
            </div>
        </div>
    </div>

    <!-- Review Chat Modal -->
    <div id="reviewChatModal" class="modal">
        <div class="modal-content" style="max-width: 900px;">
            <div class="modal-header">
                <h3>üí¨ Chat Transcript Review</h3>
                <button class="close-btn" onclick="closeReviewChatModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="chat-review-header">
                    <div class="chat-review-info">
                        <p><strong>Chat ID:</strong> <span id="reviewChatId">#9012</span></p>
                        <p><strong>User:</strong> <span id="reviewUserId">#5678</span></p>
                        <p><strong>Duration:</strong> <span id="chatDuration">5 minutes</span></p>
                        <p><strong>AI Confidence:</strong> <span class="tag red">High (95%)</span></p>
                    </div>
                    <div class="ai-analysis-box">
                        <h4>ü§ñ AI Analysis</h4>
                        <p><strong>Detected:</strong> Threatening Language</p>
                        <p><strong>Keywords:</strong> weapon, hurt, tonight</p>
                        <p><strong>Sentiment:</strong> Hostile</p>
                        <p><strong>Urgency:</strong> Critical</p>
                    </div>
                </div>

                <div class="chat-transcript">
                    <h4>Full Conversation Transcript</h4>
                    <div id="chatTranscriptContent" class="transcript-messages">
                        <!-- Content will be dynamically inserted -->
                    </div>
                </div>

                <div class="review-actions-section">
                    <h4>Review Actions</h4>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="threatConfirmed">
                            Confirm threat is genuine
                        </label>
                    </div>
                    <div class="form-group">
                        <label for="reviewNotes">Admin Notes</label>
                        <textarea id="reviewNotes" placeholder="Add your review notes..." rows="3"></textarea>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeReviewChatModal()">Close</button>
                <button class="btn btn-warning" onclick="markAsFalsePositive()">Mark as False Positive</button>
                <button class="btn btn-danger" onclick="escalateFromReview()">Escalate to Authorities</button>
            </div>
        </div>
    </div>

    <!-- Escalate Alert Modal -->
    <div id="escalateModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‚ö†Ô∏è Escalate Alert</h3>
                <button class="close-btn" onclick="closeEscalateModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="alert-banner urgent">
                    <div class="alert-icon">üö®</div>
                    <div>
                        <strong>CRITICAL ACTION REQUIRED</strong><br>
                        <span style="font-size: 0.9rem;">This will immediately notify law enforcement agencies</span>
                    </div>
                </div>

                <div class="escalation-info">
                    <h4>Alert Information</h4>
                    <div id="escalationAlertInfo">
                        <!-- Content will be dynamically inserted -->
                    </div>
                </div>

                <div class="notify-agencies">
                    <label>Select Agencies to Notify *</label>
                    <div class="agency-checkboxes">
                        <label class="agency-checkbox">
                            <input type="checkbox" name="escalateAgencies" value="JCF" checked>
                            <span class="agency-name">Jamaica Constabulary Force (JCF)</span>
                        </label>
                        <label class="agency-checkbox">
                            <input type="checkbox" name="escalateAgencies" value="JDF">
                            <span class="agency-name">Jamaica Defence Force (JDF)</span>
                        </label>
                        <label class="agency-checkbox">
                            <input type="checkbox" name="escalateAgencies" value="JCDF">
                            <span class="agency-name">Jamaica Combined Defence Force (JCDF)</span>
                        </label>
                        <label class="agency-checkbox">
                            <input type="checkbox" name="escalateAgencies" value="NSA" checked>
                            <span class="agency-name">National Security Agency</span>
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label for="escalationPriority">Escalation Priority *</label>
                    <select id="escalationPriority" required>
                        <option value="critical" selected>Critical - Immediate Response</option>
                        <option value="high">High Priority</option>
                        <option value="standard">Standard</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="escalationReason">Reason for Escalation *</label>
                    <textarea id="escalationReason" required placeholder="Describe why this alert requires escalation..." rows="4"></textarea>
                </div>

                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="dispatchUnits">
                        Request immediate dispatch of units to location
                    </label>
                </div>

                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="notifyCommander">
                        Notify Duty Commander
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeEscalateModal()">Cancel</button>
                <button class="btn btn-danger" onclick="confirmEscalation()">
                    üö® Confirm Escalation
                </button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>